---
layout: article
---

{% assign plant_data = site.data.padapt | where: "taxon_lat", page.title | first %}

<div class="image-container">
    <div class="image-wrapper" data-featherlight-gallery data-featherlight-filter="a">
        <a id="target-a1"><img id="target-image-1" alt="{{plant_data.name}}"></a>
        <a id="target-a2"><img id="target-image-2" alt="{{plant_data.name}}"></a>
        <a id="target-a3"><img id="target-image-3" alt="{{plant_data.name}}"></a>
        <a id="target-a4"><img id="target-image-4" alt="{{plant_data.name}}"></a>
        <a id="target-a5"><img id="target-image-5" alt="{{plant_data.name}}"></a>
    </div>
</div>


{% assign dictionary=site.data.dictionary %}

{% assign eletforma = plant_data['Életforma'] %}
{%if eletforma %}
<p class="success">Életforma: <b>{{eletforma}}</b> {{ dictionary[eletforma][0].title }}<br>{{ dictionary[eletforma][0].desc }}</p>
{%endif%}

{% assign szoc = plant_data['Szociális magatartási típus'] %}
{%if szoc%}
<p class="success">Szociális magatartási típus: <b>{{szoc}}</b><br>{{dictionary[szoc][0].desc }}</p>
{%endif%}

{% assign floraelem = plant_data['Flóraelem besorolás'] %}
{%if floraelem%}
<p class="success">Flóraelem besorolás: <b>{{floraelem}}</b><br>{{dictionary[floraelem][0].title }}</p>
{%endif%}

{% assign inv = plant_data['invasion_status_hu'] %}
{%if inv%}
<p class="success">Inváziós státusz: <b>{{inv}}</b> {{dictionary[inv][0].desc }}</p>
{%endif%}

{% assign terjedes = plant_data['Terjedési stratégia'] %}
{%if terjedes %}
<p class="success">Terjedési stratégia: <b>{{terjedes}}</b> <br>{{dictionary[terjedes][0].desc }} </p>
{%endif%}

{% assign edible=site.data.toxic %}
{% if edible[page.title] %}
{% if edible[page.title][0].toxic %}
<p class="error">Edible: <i class="fa-solid fa-skull-crossbones"></i><br>
    {{edible[page.title][0].desc }} </p>
{% else %}
<p class="success">Edible:<br>{{edible[page.title][0].desc }} </p>
{%endif%}
{%endif%}

{% assign lbertek = plant_data['LB'] %}
{%if lbertek %}
<p class="info">
    <i class="fa-regular fa-sun" style="color: #337CCC;"></i>
    Minimális fényigény<br>
    <progress value={{lbertek}} max=9>{{lbertek}}</progress><b> {{lbertek}}</b>/9
    {% assign desc_key = "LB-" | append: lbertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    <br>{{ desc1 }}
</p>
{%endif%}

{% assign nsertek = plant_data['NS'] %}
<p class="info">
    <i class="fa-solid fa-bottle-droplet" style="color: #337CCC;"></i>
    Tápanyagigény, N-igény:<br>
    {%if nsertek %}
    <progress value={{nsertek}} max=11>{{nsertek}}</progress><b> {{nsertek}}</b>/11
    {% assign desc_key = "WZ-" | append: nsertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    {{ desc1 }}
    {%endif%}
</p>


{% assign rzertek = plant_data['RZ'] %}
{%if rzertek %}
<p class="info">
    <svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16px" viewBox="0 -960 960 960" fill="#337CCC"><path d="M380-81q-130-8-215-100T80-408q0-100 79.5-217.5T400-880q161 137 240.5 254.5T720-408v14q0 7-1 14h-60q1-7 1-14v-14q0-79-66.5-179.5T400-800Q273-688 206.5-587.5T140-408q0 108.76 68 183.88Q276-149 380-141v60Zm20-389Zm40 390v-240h152q20 0 34 14t14 34v64q0 20-14 34t-34 14H488v80h-48Zm238 0v-240h48v89h108v-89h48v240h-48v-103H726v103h-48ZM488-208h104v-64H488v64Z"/></svg>
    Talajreakció, Ca-igény:<br>
    <progress value={{rzertek}} max=5>{{rzertek}}</progress> <b>{{rzertek}}</b>/5
    {% assign desc_key = "RZ-" | append: rzertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    <br>{{ desc1 }}
</p>
{%endif%}

{% assign ellsertek = plant_data['ELLS'] %}
{%if ellsertek %}
<p class="info">
    <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" fill="#337CCC"><path d="M480-80q-137 0-228.5-94T160-408h80q0 107 68 177.5T480-160q104 0 172-70.5T720-408h80q0 140-91.5 234T480-80ZM200-480q-17 0-28.5-11.5T160-520q0-17 11.5-28.5T200-560q17 0 28.5 11.5T240-520q0 17-11.5 28.5T200-480Zm180 0q-17 0-28.5-11.5T340-520q0-17 11.5-28.5T380-560q17 0 28.5 11.5T420-520q0 17-11.5 28.5T380-480Zm200 0q-17 0-28.5-11.5T540-520q0-17 11.5-28.5T580-560q17 0 28.5 11.5T620-520q0 17-11.5 28.5T580-480Zm180 0q-17 0-28.5-11.5T720-520q0-17 11.5-28.5T760-560q17 0 28.5 11.5T800-520q0 17-11.5 28.5T760-480ZM290-590q-17 0-28.5-11.5T250-630q0-17 11.5-28.5T290-670q17 0 28.5 11.5T330-630q0 17-11.5 28.5T290-590Zm380 0q-17 0-28.5-11.5T630-630q0-17 11.5-28.5T670-670q17 0 28.5 11.5T710-630q0 17-11.5 28.5T670-590Zm-190-10q-17 0-28.5-11.5T440-640q0-17 11.5-28.5T480-680q17 0 28.5 11.5T520-640q0 17-11.5 28.5T480-600ZM380-700q-17 0-28.5-11.5T340-740q0-17 11.5-28.5T380-780q17 0 28.5 11.5T420-740q0 17-11.5 28.5T380-700Zm200 0q-17 0-28.5-11.5T540-740q0-17 11.5-28.5T580-780q17 0 28.5 11.5T620-740q0 17-11.5 28.5T580-700ZM480-800q-17 0-28.5-11.5T440-840q0-17 11.5-28.5T480-880q17 0 28.5 11.5T520-840q0 17-11.5 28.5T480-800Zm0 392Z"/></svg>
    Sótűrés, Cl-tűrés<br>
    <progress value={{ellsertek}} max=9>{{ellsertek}}</progress> <b>{{ellsertek}}</b>/9
    {% assign desc_key = "ELLS-" | append: ellsertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    <br>{{ desc1 }}
</p>
{%endif%}

{% assign wzertek = plant_data['WZ'] %}
{% assign wbertek = plant_data['WB'] %}
{% assign fsertek = plant_data['FS'] %}
<p class="info">
    <i class="fa-solid fa-water" style="color: #337CCC;"></i>
    Talajnedvesség, vízigény:<br>
    {%if wzertek %}
    <progress value={{wzertek}} max=11>{{wzertek}}</progress><b> {{wzertek}}</b>/11
    {% assign desc_key = "WZ-" | append: wzertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    {{ desc1 }}
    {%endif%}
<br>
    {%if wbertek %}
    <progress value={{wbertek}} max=12>{{wbertek}}</progress><b> {{wbertek}}</b>/12
    {% assign desc_key = "WB-" | append: wbertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    {{ desc1 }}
    {%endif%}
    <br>
    {%if fsertek %}
    <progress value={{fsertek}} max=5>{{fsertek}}</progress><b> {{fsertek}}</b>/5
    {% assign desc_key = "FS-" | append: fsertek %}
    {% assign desc1 = dictionary[desc_key][0]['desc'] %}
    {{ desc1 }}
    {%endif%}
</p>



<script>
    fetch("https://api.inaturalist.org/v1/taxa/autocomplete?q={{page.title}}&rank=species,subspecies,hybrid,variety&locale=hu")
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    // Check if results exist and if the first result has a default_photo
    if (data.results && data.results.length > 0) {

      if (data.results[0].preferred_common_name)
      {
        const preferredCommonName = data.results[0].preferred_common_name;
        document.getElementById('title_preferred_common_name').innerText = preferredCommonName.charAt(0).toUpperCase() + preferredCommonName.slice(1); // Capitalize the name
      }
      if (data.results[0].preferred_common_name && data.results[0].english_common_name)
      {
            document.getElementById('title_separator').innerText = " • "
      }
      if (data.results[0].english_common_name)
      {
        const englishCommonName = data.results[0].english_common_name;
        document.getElementById('title_english_common_name').innerText = englishCommonName.charAt(0).toUpperCase() + englishCommonName.slice(1); // Capitalize the name
      }

      const taxa_id = data.results[0].id; // Declare taxa_id here

      // Second fetch using the extracted taxa_id
      return fetch(`https://api.inaturalist.org/v1/taxa/${taxa_id}`);
    } else {
      console.error('No results found.');
    }
  })
  .then(response => {
    if (response) { // Ensure response is defined
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    }
  })
  .then(taxaData => {
    if (taxaData.results && taxaData.results.length > 0) {

        const firstResult = taxaData.results[0].taxon_photos;
        if (firstResult) {
          document.getElementById('target-image-1').src = firstResult[0].photo.medium_url;
          document.getElementById('target-a1').href = firstResult[0].photo.large_url;
          document.getElementById('target-image-2').src = firstResult[1].photo.medium_url;
          document.getElementById('target-a2').href = firstResult[1].photo.large_url;
          document.getElementById('target-image-3').src = firstResult[2].photo.medium_url;
          document.getElementById('target-a3').href = firstResult[2].photo.large_url;
          document.getElementById('target-image-4').src = firstResult[3].photo.medium_url;
          document.getElementById('target-a4').href = firstResult[3].photo.large_url;
          document.getElementById('target-image-5').src = firstResult[4].photo.medium_url;
          document.getElementById('target-a5').href = firstResult[4].photo.large_url;

        } else {
          console.error('No default photo available for the first result.');
        }
      } else {
        console.error('No results found.');
      }
  })
  .catch(error => {
    console.error('Error:', error);
  });

</script>

